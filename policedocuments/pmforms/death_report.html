<!DOCTYPE html>
<html lang="ta">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>மரண அறிக்கை படிவம் - PDF உருவாக்கி</title>
    <!-- Load required libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial Unicode MS', Arial, sans-serif;
        }
        
        body {
            line-height: 1.6;
            color: #333;
            background-color: #f5f5f5;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            gap: 20px;
        }
        
        .form-section, .preview-section {
            background-color: #fff;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            border-radius: 5px;
            padding: 20px;
        }
        
        .form-section {
            flex: 1;
        }
        
        .preview-section {
            flex: 1;
            display: flex;
            flex-direction: column;
        }
        
        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #e74c3c;
        }
        
        h2 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 18px;
        }
        
        .form-group {
            margin-bottom: 12px;
        }
        
        label {
            display: block;
            margin-bottom: 4px;
            font-weight: bold;
            color: #2c3e50;
            font-size: 14px;
        }
        
        input, select, textarea {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
            transition: border 0.3s;
        }
        
        input:focus, select:focus, textarea:focus {
            border-color: #3498db;
            outline: none;
            box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.1);
        }
        
        textarea {
            height: 60px;
            resize: vertical;
        }
        
        .form-row {
            display: flex;
            gap: 10px;
            margin-bottom: 12px;
        }
        
        .form-row .form-group {
            flex: 1;
        }
        
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            margin: 5px;
            transition: background-color 0.3s;
        }
        
        .btn-generate {
            background-color: #2c3e50;
            color: white;
        }
        
        .btn-generate:hover {
            background-color: #1a252f;
        }
        
        .btn-reset {
            background-color: #ecf0f1;
            color: #333;
        }
        
        .btn-reset:hover {
            background-color: #d5dbdb;
        }
        
        .btn-preview {
            background-color: #3498db;
            color: white;
            margin-right: 10px;
        }
        
        .btn-preview:hover {
            background-color: #2980b9;
        }
        
        .button-container {
            text-align: center;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid #eee;
        }
        
        .loading {
            display: none;
            text-align: center;
            padding: 10px;
            color: #3498db;
        }
        
        .required::after {
            content: " *";
            color: #e74c3c;
        }
        
        /* Preview styling */
        #previewContent {
            flex: 1;
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 15px;
            background: white;
            overflow-y: auto;
            max-height: 600px;
        }
        
        .preview-page {
            background: white;
            padding: 20px;
            min-height: 800px;
            box-shadow: 0 0 5px rgba(0,0,0,0.1);
            font-size: 14px;
            line-height: 1.4;
        }
        
        .preview-header {
            text-align: center;
            margin-bottom: 20px;
        }
        
        .preview-header h3 {
            margin: 0;
            font-size: 18px;
            color: #2c3e50;
        }
        
        .preview-table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .preview-table td {
            padding: 8px 4px;
            vertical-align: top;
            border-bottom: 1px solid #eee;
        }
        
        .preview-label {
            font-weight: bold;
            width: 45%;
            color: #2c3e50;
            font-size: 14px;
            text-align: left;
            padding-right: 8px !important;
        }
        
        .preview-colon {
            width: 5%;
            text-align: center;
            font-weight: bold;
            font-size: 14px;
            padding: 0 4px !important;
        }
        
        .preview-value {
            width: 50%;
            font-size: 14px;
            padding-left: 8px !important;
        }
        
        .no-preview {
            text-align: center;
            color: #7f8c8d;
            padding: 40px 20px;
            font-style: italic;
        }
        
        @media (max-width: 768px) {
            .container {
                flex-direction: column;
            }
        }
        
        .success-message {
            background-color: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
            padding: 10px;
            border-radius: 4px;
            margin-top: 10px;
            display: none;
        }
        
        /* Hidden template for PDF generation */
        .pdf-template-container {
            position: absolute;
            left: -9999px;
            top: -9999px;
            width: 210mm;
            background: white;
        }
        
        .pdf-template {
            width: 210mm;
            min-height: 297mm;
            padding: 25mm;
            background: white;
            font-size: 16px !important;
            line-height: 1.5 !important;
            box-sizing: border-box;
        }
        
        .searchable-select {
            position: relative;
        }
        
        .search-box {
            margin-bottom: 5px;
            padding: 6px;
            width: 100%;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 13px;
        }
        
        .station-list {
            max-height: 200px;
            overflow-y: auto;
            border: 1px solid #ddd;
            border-radius: 4px;
            margin-top: 5px;
            display: none;
            position: absolute;
            background: white;
            width: 100%;
            z-index: 1000;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .station-item {
            padding: 8px 10px;
            cursor: pointer;
            border-bottom: 1px solid #eee;
            font-size: 13px;
        }
        
        .station-item:hover {
            background-color: #f5f5f5;
        }
        
        .station-item.selected {
            background-color: #3498db;
            color: white;
        }
        
        .custom-option {
            color: #666;
            font-style: italic;
        }
        
        .crime-number-container {
            display: flex;
            gap: 8px;
            align-items: center;
        }
        
        .crime-number-container input {
            flex: 1;
        }
        
        .crime-number-container .slash {
            font-size: 16px;
            font-weight: bold;
        }
        
        .year-select {
            width: 100px !important;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="form-section">
            <h1>மரண அறிக்கை படிவம்</h1>
            
            <form id="deathReportForm">
                <div class="form-row">
                    <div class="form-group searchable-select">
                        <label for="policeStation" class="required">1. காவல் நிலையம்</label>
                        <input type="text" id="policeStation" name="policeStation" required placeholder="காவல் நிலையத்தை தேடவும் அல்லது தேர்ந்தெடுக்கவும்">
                        <input type="text" id="stationSearch" class="search-box" placeholder="தேடவும்..." style="display: none;">
                        <div id="stationList" class="station-list"></div>
                    </div>
                    
                    <div class="form-group">
                        <label for="crimeNumber" class="required">2. குற்ற எண்</label>
                        <div class="crime-number-container">
                            <input type="text" id="crimeNumber" name="crimeNumber" required placeholder="எண்" style="flex: 1;">
                            <span class="slash">/</span>
                            <select id="crimeYear" class="year-select" name="crimeYear" required style="width: 100px;">
                                <!-- Years will be populated by JavaScript -->
                            </select>
                        </div>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="section" class="required">3. பிரிவு</label>
                        <input type="text" id="section" name="section" value="194 BNSS" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="name" class="required">4. பெயர்</label>
                        <input type="text" id="name" name="name" required>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="fatherName" class="required">5. தகப்பனார் பெயர்</label>
                        <input type="text" id="fatherName" name="fatherName" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="polym" class="required">6. பாலினம்</label>
                        <select id="polym" name="polym" required>
                            <option value="" selected disabled>தேர்வு செய்யவும்</option>
                            <option value="ஆண்">ஆண்</option>
                            <option value="பெண்">பெண்</option>
                            <option value="மற்றவை">மற்றவை</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="nationality" class="required">7. எந்த நாட்டை சேர்ந்தவர்</label>
                        <input type="text" id="nationality" name="nationality" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="religion" class="required">8. மதம்</label>
                        <input type="text" id="religion" name="religion" required>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="age" class="required">9. வயது</label>
                        <input type="number" id="age" name="age" min="0" max="120" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="deathDate" class="required">10. மரணம் அடைந்த நாள்</label>
                        <input type="date" id="deathDate" name="deathDate" required>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="deathCause" class="required">11. மரணத்திற்கான காரணம்</label>
                    <textarea id="deathCause" name="deathCause" required></textarea>
                </div>
                
                <div class="form-group">
                    <label for="address" class="required">12. விலாசம்</label>
                    <textarea id="address" name="address" required></textarea>
                </div>
                
                <div class="form-group">
                    <label for="deathPlace" class="required">13. மரணம் ஏற்பட்ட இடம்</label>
                    <textarea id="deathPlace" name="deathPlace" required></textarea>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="maritalStatus" class="required">14. திருமணம் ஆனவரா/ விதவையா</label>
                        <select id="maritalStatus" name="maritalStatus" required>
                            <option value="" selected disabled>தேர்வு செய்யவும்</option>
                            <option value="ஆம்">ஆம்</option>
                            <option value="இல்லை">இல்லை</option>
                            <option value="விதவை">விதவை</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="occupation" class="required">15. தொழில்</label>
                        <input type="text" id="occupation" name="occupation" required>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="bodyDisposal" class="required">16. பிரதேம் புதைக்கப்படுமா/ எரிக்கப்படுமா</label>
                        <select id="bodyDisposal" name="bodyDisposal" required>
                            <option value="" selected disabled>தேர்வு செய்யவும்</option>
                            <option value="புதைக்கப்படும்">புதைக்கப்படும்</option>
                            <option value="எரிக்கப்படும்">எரிக்கப்படும்</option>
                            <option value="மற்றவை">மற்றவை</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="informantName" class="required">17. சுடுகாட்டின் பெயர்</label>
                        <input type="text" id="informantName" name="informantName" required>
                    </div>
                </div>
                
                <div class="button-container">
                    <button type="button" id="previewBtn" class="btn btn-preview">முன்னோட்டம் காட்டு</button>
                    <button type="button" id="generatePdf" class="btn btn-generate">PDF உருவாக்கு</button>
                    <button type="reset" id="resetForm" class="btn btn-reset">மீட்டமை</button>
                </div>
            </form>
            
            <div class="loading" id="pdfLoading">
                <p>PDF உருவாக்கப்படுகிறது... தயவு செய்து காத்திருக்கவும்</p>
            </div>
            
            <div class="success-message" id="successMessage">
                PDF வெற்றிகரமாக உருவாக்கப்பட்டது!
            </div>
        </div>
        
        <div class="preview-section">
            <h2>PDF முன்னோட்டம்</h2>
            <div id="previewContent">
                <div class="no-preview">
                    <p>படிவத்தை நிரப்பி "முன்னோட்டம் காட்டு" பொத்தானை அழுத்தவும்</p>
                    <p>படிவத்தில் உள்ள தகவல்கள் இங்கே PDF வடிவத்தில் காட்டப்படும்</p>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Hidden container for PDF template -->
    <div id="pdfTemplateContainer" class="pdf-template-container"></div>

    <script>
        // Load jsPDF
        const { jsPDF } = window.jspdf;
        
        // Police stations data
        const policeStations = [
            "AWPS பேரவள்ளூர்",
            "B1 வடக்குக் கடற்கரை காவல் நிலையம்",
            "B2 எஸ்பிளனேட் காவல் நிலையம்",
            "B3 கோட்டை செயின்ட் ஜார்ஜ் காவல் நிலையம்",
            "B4 உயர்நீதிமன்ற காவல் நிலையம்",
            "C1 பூக்கடை காவல் நிலையம்",
            "C2 எலிபெண்ட் கேட் காவல் நிலையம்",
            "C3 செவன் வெல்ஸ் காவல் நிலையம்",
            "C4 அரசு பொது மருத்துவமனை அவுட்போஸ்ட்",
            "C5 கொத்தவால் சாவடி காவல் நிலையம்",
            "D1 திருப்பள்ளிக்கேணி காவல் நிலையம்",
            "D2 அண்ணா சாலை காவல் நிலையம்",
            "D3 ஐஸ் ஹவுஸ் காவல் நிலையம்",
            "D4 ஜாம் பஜார் காவல் நிலையம்",
            "D5 மெரினா காவல் நிலையம்",
            "D6 அண்ணா சதுக்கம் காவல் நிலையம்",
            "D6 அண்ணா சதுக்கம் போக்குவரத்து விசாரணை",
            "D7 அரசு எஸ்டேட் காவல் நிலையம்",
            "D8 கஸ்தூரிபாய் காந்தி மருத்துவமனை காவல் நிலையம்",
            "E1 மயிலாப்பூர் காவல் நிலையம்",
            "E2 ராயப்பேட்டை காவல் நிலையம்",
            "E3 தேனாம்பேட்டை காவல் நிலையம்",
            "E4 அபிராமபுரம் காவல் நிலையம்",
            "E5 பட்டினப்பாக்கம் காவல் நிலையம்",
            "F1 சிந்தாதிரிப்பேட்டை காவல் நிலையம்",
            "F2 எழும்பூர் காவல் நிலையம்",
            "F3 நுங்கம்பாக்கம் காவல் நிலையம்",
            "F4 தௌசண்ட் லைட்ஸ் காவல் நிலையம்",
            "F5 சேத்துப்பட்டு காவல் நிலையம்",
            "F6 மியூசியம் காவல் நிலையம்",
            "F7 அரசு மகளிர் குழந்தைகள் மருத்துவமனை காவல் நிலையம்",
            "G1 வேப்பேரி காவல் நிலையம்",
            "G2 பெரியமேடு காவல் நிலையம்",
            "G3 கிளிப்பாக் காவல் நிலையம்",
            "G3 கிளிப்பாக் போக்குவரத்து விசாரணை",
            "G4 மனநல மருத்துவமனை அவுட்போஸ்ட்",
            "G5 செயலக காலனி காவல் நிலையம்",
            "G6 கிளிப்பாக் மருத்துவக் கல்லூரி காவல் நிலையம்",
            "G7 சேத்துபட்டு காவல் நிலையம்",
            "H1 பழைய வண்ணாரப்பேட்டை காவல் நிலையம்",
            "H2 ஸ்டான்லி மருத்துவமனை அவுட்போஸ்ட்",
            "H3 தொண்டையார்பேட்டை காவல் நிலையம்",
            "H4 கொருக்குப்பேட்டை காவல் நிலையம்",
            "H5 புதிய வண்ணாரப்பேட்டை காவல் நிலையம்",
            "H6 டாக்டர் ராதாகிருஷ்ணன் நகர்",
            "H8 திருவொற்றியூர் காவல் நிலையம்",
            "J13 தரமணி காவல் நிலையம்",
            "J1 சைதாப்பேட்டை காவல் நிலையம்",
            "J2 அடையாறு காவல் நிலையம்",
            "J3 கிண்டி காவல் நிலையம்",
            "J4 கொட்டூர்புரம் காவல் நிலையம்",
            "J5 சாஸ்திரி நகர் காவல் நிலையம்",
            "J6 திருவான்மியூர் காவல் நிலையம்",
            "J7 வேளச்சேரி காவல் நிலையம்",
            "J8 நீலாங்கரை காவல் நிலையம்",
            "J9 துரைப்பாக்கம் காவல் நிலையம்",
            "K10 கோயம்பேடு காவல் நிலையம்",
            "K10 TIW கோயம்பேடு",
            "K11 CMBT காவல் நிலையம்",
            "K1 செம்பியம் காவல் நிலையம்",
            "K2 அயனாவரம் காவல் நிலையம்",
            "K3 அமைஞ்சிக்கரை காவல் நிலையம்",
            "K4 அண்ணா நகர் காவல் நிலையம்",
            "K4 TIW அண்ணா நகர்",
            "K5 பேரவள்ளூர் காவல் நிலையம்",
            "K6 டிபி சத்திரம் காவல் நிலையம்",
            "K7 ICF காவல் நிலையம்",
            "K8 அரும்பாக்கம் காவல் நிலையம்",
            "K9 திரு வி க நகர் காவல் நிலையம்",
            "M1 ஹார்பர் காவல் நிலையம்",
            "M2 வாட்டர் பிரோன் காவல் நிலையம்",
            "N1 ராயபுரம் காவல் நிலையம்",
            "N2 காசிமேடு காவல் நிலையம்",
            "N3 முத்தியால்பேட்டை காவல் நிலையம்",
            "N4 மீன்பிடி துறைமுக காவல் நிலையம்",
            "N5 RSRM மருத்துவமனை காவல் நிலையம்",
            "P1 புளியந்தோப்பு காவல் நிலையம்",
            "P2 ஒட்டேரி காவல் நிலையம்",
            "P3 வியாசர்பாடி காவல் நிலையம்",
            "P4 பேசின் பிரிட்ஜ் காவல் நிலையம்",
            "P5 MKB நகர் காவல் நிலையம்",
            "P6 கொடுங்கையூர் காவல் நிலையம்",
            "R10 எம்ஜிஆர் நகர் காவல் நிலையம்",
            "R1 மாம்பலம் காவல் நிலையம்",
            "R2 கோடம்பாக்கம் காவல் நிலையம்",
            "R3 அசோக் நகர் காவல் நிலையம்",
            "R4 பாண்டி பஜார் காவல் நிலையம்",
            "R4 TIW பாண்டி பஜார்",
            "R5 சூளைமேடு காவல் நிலையம்",
            "R6 குமரன் காலனி காவல் நிலையம்",
            "R7 கேகே நகர் காவல் நிலையம்",
            "R9 வளசரவாக்கம் காவல் நிலையம்",
            "V1 வில்லிவாக்கம் காவல் நிலையம்",
            "V2 விருகம்பாக்கம் காவல் நிலையம்",
            "V3 ஜே ஜே நகர் காவல் நிலையம்",
            "V4 ராஜமங்கலம் காவல் நிலையம்",
            "V5 திருமங்கலம் காவல் நிலையம்",
            "V5 TIW திருமங்கலம்",
            "V6 கொளத்தூர் காவல் நிலையம்",
            "W10 அனைத்து மகளிர் காவல் நிலையம் பூக்கடை",
            "W11 அனைத்து மகளிர் காவல் நிலையம் உயர்நீதிமன்றம்",
            "W12 அனைத்து மகளிர் காவல் நிலையம் ஹார்பர்",
            "W13 அனைத்து மகளிர் காவல் நிலையம் வண்ணாரப்பேட்டை",
            "W14 அனைத்து மகளிர் காவல் நிலையம் திருவொற்றியூர்",
            "W15 அனைத்து மகளிர் காவல் நிலையம் ராயபுரம்",
            "W16 அனைத்து மகளிர் காவல் நிலையம் புளியந்தோப்பு",
            "W18 அனைத்து மகளிர் காவல் நிலையம் MKB நகர்",
            "W19 அனைத்து மகளிர் காவல் நிலையம் அடையாறு",
            "W1 அனைத்து மகளிர் காவல் நிலையம் தௌசண்ட் லைட்ஸ்",
            "W20 அனைத்து மகளிர் காவல் நிலையம் சைதாப்பேட்டை",
            "W21 அனைத்து மகளிர் காவல் நிலையம் கிண்டி",
            "W22 அனைத்து மகளிர் காவல் நிலையம் மயிலாப்பூர்",
            "W23 அனைத்து மகளிர் காவல் நிலையம் ராயப்பேட்டை",
            "W24 அனைத்து மகளிர் காவல் நிலையம் தேனாம்பேட்டை",
            "W25 அனைத்து மகளிர் காவல் நிலையம் தி நகர்",
            "W26 அனைத்து மகளிர் காவல் நிலையம் அசோக் நகர்",
            "W27 அனைத்து மகளிர் காவல் நிலையம் வடபழனி",
            "W2 அனைத்து மகளிர் காவல் நிலையம் அடையாறு",
            "W2 AWPS திருப்பள்ளிக்கேணி",
            "W35 கோயம்பேடு AWPS",
            "W38 கொளத்தூர் AWPS",
            "W4 அனைத்து மகளிர் காவல் நிலையம் கிளிப்பாக்",
            "W5 அனைத்து மகளிர் காவல் நிலையம் வேப்பேரி",
            "W6 அனைத்து மகளிர் காவல் நிலையம் அயனாவரம்",
            "W7 AWPS அண்ணா நகர்",
            "W8 அனைத்து மகளிர் காவல் நிலையம் திருமங்கலம்",
            "W9 அனைத்து மகளிர் காவல் நிலையம் வில்லிவாக்கம்"
        ];
        
        // Form elements
        const form = document.getElementById('deathReportForm');
        const policeStationInput = document.getElementById('policeStation');
        const stationSearch = document.getElementById('stationSearch');
        const stationList = document.getElementById('stationList');
        const crimeNumberInput = document.getElementById('crimeNumber');
        const crimeYearSelect = document.getElementById('crimeYear');
        const sectionInput = document.getElementById('section');
        const previewBtn = document.getElementById('previewBtn');
        const generateBtn = document.getElementById('generatePdf');
        const resetBtn = document.getElementById('resetForm');
        const previewContent = document.getElementById('previewContent');
        const successMessage = document.getElementById('successMessage');
        const pdfTemplateContainer = document.getElementById('pdfTemplateContainer');
        
        // Function to populate year dropdown
        function populateYearDropdown() {
            const currentYear = new Date().getFullYear();
            const startYear = currentYear - 10; // Last 10 years
            const endYear = currentYear + 5; // Next 5 years
            
            crimeYearSelect.innerHTML = '';
            
            for (let year = startYear; year <= endYear; year++) {
                const option = document.createElement('option');
                option.value = year;
                option.textContent = year;
                if (year === currentYear) {
                    option.selected = true;
                }
                crimeYearSelect.appendChild(option);
            }
        }
        
        // Initialize police station dropdown
        function initializePoliceStationDropdown() {
            // Create station list items
            policeStations.forEach(station => {
                const item = document.createElement('div');
                item.className = 'station-item';
                item.textContent = station;
                item.addEventListener('click', () => {
                    policeStationInput.value = station;
                    stationList.style.display = 'none';
                    stationSearch.style.display = 'none';
                    stationSearch.value = '';
                    showPreview();
                });
                stationList.appendChild(item);
            });
            
            // Add "மற்றவை" option
            const otherOption = document.createElement('div');
            otherOption.className = 'station-item custom-option';
            otherOption.textContent = 'மற்றவை (தனிப்பயன்)';
            otherOption.addEventListener('click', () => {
                policeStationInput.value = '';
                stationList.style.display = 'none';
                stationSearch.style.display = 'none';
                policeStationInput.focus();
            });
            stationList.appendChild(otherOption);
            
            // Show dropdown when input is clicked
            policeStationInput.addEventListener('click', (e) => {
                stationSearch.style.display = 'block';
                stationList.style.display = 'block';
                filterStations();
                stationSearch.focus();
                e.stopPropagation();
            });
            
            // Search functionality
            stationSearch.addEventListener('input', filterStations);
            
            // Hide dropdown when clicking outside
            document.addEventListener('click', (e) => {
                if (!e.target.closest('.searchable-select')) {
                    stationList.style.display = 'none';
                    stationSearch.style.display = 'none';
                }
            });
            
            // Handle keyboard navigation
            policeStationInput.addEventListener('keydown', (e) => {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    stationSearch.style.display = 'block';
                    stationList.style.display = 'block';
                    filterStations();
                    stationSearch.focus();
                }
            });
            
            stationSearch.addEventListener('keydown', (e) => {
                const items = stationList.querySelectorAll('.station-item:not(.custom-option)');
                const visibleItems = Array.from(items).filter(item => 
                    item.style.display !== 'none' && !item.classList.contains('custom-option')
                );
                
                if (e.key === 'ArrowDown') {
                    e.preventDefault();
                    if (visibleItems.length > 0) {
                        visibleItems[0].classList.add('selected');
                        visibleItems[0].focus();
                    }
                }
            });
            
            stationList.addEventListener('keydown', (e) => {
                const items = stationList.querySelectorAll('.station-item:not(.custom-option)');
                const visibleItems = Array.from(items).filter(item => 
                    item.style.display !== 'none' && !item.classList.contains('custom-option')
                );
                const currentIndex = visibleItems.findIndex(item => item.classList.contains('selected'));
                
                if (e.key === 'ArrowDown') {
                    e.preventDefault();
                    if (currentIndex < visibleItems.length - 1) {
                        visibleItems.forEach(item => item.classList.remove('selected'));
                        visibleItems[currentIndex + 1].classList.add('selected');
                        visibleItems[currentIndex + 1].scrollIntoView({ block: 'nearest' });
                    }
                } else if (e.key === 'ArrowUp') {
                    e.preventDefault();
                    if (currentIndex > 0) {
                        visibleItems.forEach(item => item.classList.remove('selected'));
                        visibleItems[currentIndex - 1].classList.add('selected');
                        visibleItems[currentIndex - 1].scrollIntoView({ block: 'nearest' });
                    }
                } else if (e.key === 'Enter') {
                    e.preventDefault();
                    const selectedItem = stationList.querySelector('.station-item.selected');
                    if (selectedItem) {
                        selectedItem.click();
                    }
                } else if (e.key === 'Escape') {
                    stationList.style.display = 'none';
                    stationSearch.style.display = 'none';
                    policeStationInput.focus();
                }
            });
        }
        
        function filterStations() {
            const searchTerm = stationSearch.value.toLowerCase();
            const items = stationList.querySelectorAll('.station-item');
            
            items.forEach(item => {
                const text = item.textContent.toLowerCase();
                if (text.includes(searchTerm) || searchTerm === '') {
                    item.style.display = 'block';
                } else {
                    item.style.display = 'none';
                }
                item.classList.remove('selected');
            });
            
            // Select first visible item
            const visibleItems = stationList.querySelectorAll('.station-item[style="display: block"]');
            if (visibleItems.length > 0 && !visibleItems[0].classList.contains('custom-option')) {
                visibleItems[0].classList.add('selected');
            }
        }
        
        // Initialize year dropdown and police station dropdown
        populateYearDropdown();
        initializePoliceStationDropdown();
        
        // Set default section value
        sectionInput.value = "194 BNSS";
        
        // Event Listeners
        previewBtn.addEventListener('click', showPreview);
        generateBtn.addEventListener('click', generatePDFWithCanvas);
        resetBtn.addEventListener('click', resetForm);
        
        // Auto-update preview when form changes
        form.addEventListener('input', debounce(showPreview, 500));
        
        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }
        
        function getFormData() {
            return {
                policeStation: policeStationInput.value,
                crimeNumber: crimeNumberInput.value,
                crimeYear: crimeYearSelect.value,
                section: sectionInput.value,
                name: document.getElementById('name').value,
                fatherName: document.getElementById('fatherName').value,
                polym: document.getElementById('polym').value,
                nationality: document.getElementById('nationality').value,
                religion: document.getElementById('religion').value,
                age: document.getElementById('age').value,
                deathDate: document.getElementById('deathDate').value,
                deathCause: document.getElementById('deathCause').value,
                address: document.getElementById('address').value,
                deathPlace: document.getElementById('deathPlace').value,
                maritalStatus: document.getElementById('maritalStatus').value,
                occupation: document.getElementById('occupation').value,
                bodyDisposal: document.getElementById('bodyDisposal').value,
                informantName: document.getElementById('informantName').value
            };
        }
        
        function getFormattedCrimeNumber() {
            const data = getFormData();
            if (data.crimeNumber && data.crimeYear) {
                return `${data.crimeNumber}/${data.crimeYear}`;
            }
            return data.crimeNumber || '';
        }
        
        function formatDate(dateString) {
            if (!dateString) return '';
            const date = new Date(dateString);
            // Convert to DD/MM/YYYY format
            const day = String(date.getDate()).padStart(2, '0');
            const month = String(date.getMonth() + 1).padStart(2, '0'); // Months are 0-based
            const year = date.getFullYear();
            return `${day}/${month}/${year}`;
        }
        
        function showPreview() {
            if (!form.checkValidity()) {
                previewContent.innerHTML = `
                    <div class="no-preview">
                        <p style="color: #e74c3c;">தயவு செய்து அனைத்து கட்டாய புலங்களையும் நிரப்பவும்</p>
                        <p>படிவத்தில் உள்ள தகவல்கள் இங்கே PDF வடிவத்தில் காட்டப்படும்</p>
                    </div>
                `;
                return;
            }
            
            const data = getFormData();
            const formattedDate = formatDate(data.deathDate);
            const formattedCrimeNumber = getFormattedCrimeNumber();
            
            const previewHTML = createPDFHTML(data, formattedDate, formattedCrimeNumber);
            previewContent.innerHTML = previewHTML;
        }
        
        function createPDFHTML(data, formattedDate, formattedCrimeNumber) {
            return `
                <div class="preview-page">
                    <div class="preview-header">
                        <h3>மரண அறிக்கை</h3>
                    </div>
                    
                    <table class="preview-table">
                        <tr>
                            <td class="preview-label">1. காவல் நிலையம்</td>
                            <td class="preview-colon">:</td>
                            <td class="preview-value">${escapeHtml(data.policeStation) || '-'}</td>
                        </tr>
                        <tr>
                            <td class="preview-label">2. குற்ற எண்</td>
                            <td class="preview-colon">:</td>
                            <td class="preview-value">${escapeHtml(formattedCrimeNumber) || '-'}</td>
                        </tr>
                        <tr>
                            <td class="preview-label">3. பிரிவு</td>
                            <td class="preview-colon">:</td>
                            <td class="preview-value">${escapeHtml(data.section) || '-'}</td>
                        </tr>
                        <tr>
                            <td class="preview-label">4. பெயர்</td>
                            <td class="preview-colon">:</td>
                            <td class="preview-value">${escapeHtml(data.name) || '-'}</td>
                        </tr>
                        <tr>
                            <td class="preview-label">5. தகப்பனார் பெயர்</td>
                            <td class="preview-colon">:</td>
                            <td class="preview-value">${escapeHtml(data.fatherName) || '-'}</td>
                        </tr>
                        <tr>
                            <td class="preview-label">6. பாலினம்</td>
                            <td class="preview-colon">:</td>
                            <td class="preview-value">${escapeHtml(data.polym) || '-'}</td>
                        </tr>
                        <tr>
                            <td class="preview-label">7. எந்த நாட்டை சேர்ந்தவர்</td>
                            <td class="preview-colon">:</td>
                            <td class="preview-value">${escapeHtml(data.nationality) || '-'}</td>
                        </tr>
                        <tr>
                            <td class="preview-label">8. மதம்</td>
                            <td class="preview-colon">:</td>
                            <td class="preview-value">${escapeHtml(data.religion) || '-'}</td>
                        </tr>
                        <tr>
                            <td class="preview-label">9. வயது</td>
                            <td class="preview-colon">:</td>
                            <td class="preview-value">${escapeHtml(data.age) || '-'}</td>
                        </tr>
                        <tr>
                            <td class="preview-label">10. மரணம் அடைந்த நாள்</td>
                            <td class="preview-colon">:</td>
                            <td class="preview-value">${escapeHtml(formattedDate) || '-'}</td>
                        </tr>
                        <tr>
                            <td class="preview-label">11. மரணத்திற்கான காரணம்</td>
                            <td class="preview-colon">:</td>
                            <td class="preview-value">${escapeHtml(data.deathCause) || '-'}</td>
                        </tr>
                        <tr>
                            <td class="preview-label">12. விலாசம்</td>
                            <td class="preview-colon">:</td>
                            <td class="preview-value">${escapeHtml(data.address) || '-'}</td>
                        </tr>
                        <tr>
                            <td class="preview-label">13. மரணம் ஏற்பட்ட இடம்</td>
                            <td class="preview-colon">:</td>
                            <td class="preview-value">${escapeHtml(data.deathPlace) || '-'}</td>
                        </tr>
                        <tr>
                            <td class="preview-label">14. திருமணம் ஆனவரா/ விதவையா</td>
                            <td class="preview-colon">:</td>
                            <td class="preview-value">${escapeHtml(data.maritalStatus) || '-'}</td>
                        </tr>
                        <tr>
                            <td class="preview-label">15. தொழில்</td>
                            <td class="preview-colon">:</td>
                            <td class="preview-value">${escapeHtml(data.occupation) || '-'}</td>
                        </tr>
                        <tr>
                            <td class="preview-label">16. பிரதேம் புதைக்கப்படுமா/ எரிக்கப்படுமா</td>
                            <td class="preview-colon">:</td>
                            <td class="preview-value">${escapeHtml(data.bodyDisposal) || '-'}</td>
                        </tr>
                        <tr>
                            <td class="preview-label">17. சுடுகாட்டின் பெயர்</td>
                            <td class="preview-colon">:</td>
                            <td class="preview-value">${escapeHtml(data.informantName) || '-'}</td>
                        </tr>
                    </table>
                </div>
            `;
        }
        
        function escapeHtml(text) {
            if (!text) return '';
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }
        
        async function generatePDFWithCanvas() {
            if (!form.checkValidity()) {
                alert('தயவு செய்து அனைத்து கட்டாய புலங்களையும் நிரப்பவும்.');
                return;
            }
            
            document.getElementById('pdfLoading').style.display = 'block';
            successMessage.style.display = 'none';
            
            const data = getFormData();
            const formattedDate = formatDate(data.deathDate);
            const formattedCrimeNumber = getFormattedCrimeNumber();
            
            try {
                // Create PDF template HTML with larger font sizes
                const pdfHTML = `
                    <div class="pdf-template" style="font-size: 16px !important; line-height: 1.5 !important;">
                        <div style="text-align: center; margin-bottom: 30px;">
                            <h3 style="margin: 0; font-size: 22px !important; color: #2c3e50;">மரண அறிக்கை</h3>
                        </div>
                        
                        <table style="width: 100%; border-collapse: collapse; margin: 15px 0; font-size: 16px !important;">
                            <tr>
                                <td style="padding: 10px 6px; vertical-align: top; border-bottom: 1px solid #eee; width: 45%; font-weight: bold; font-size: 16px !important; text-align: left;">1. காவல் நிலையம்</td>
                                <td style="padding: 10px 2px; vertical-align: top; border-bottom: 1px solid #eee; width: 5%; text-align: center; font-weight: bold; font-size: 16px !important;">:</td>
                                <td style="padding: 10px 6px; vertical-align: top; border-bottom: 1px solid #eee; width: 50%; font-size: 16px !important;">${escapeHtml(data.policeStation) || '-'}</td>
                            </tr>
                            <tr>
                                <td style="padding: 10px 6px; vertical-align: top; border-bottom: 1px solid #eee; font-weight: bold; font-size: 16px !important; text-align: left;">2. குற்ற எண்</td>
                                <td style="padding: 10px 2px; vertical-align: top; border-bottom: 1px solid #eee; text-align: center; font-weight: bold; font-size: 16px !important;">:</td>
                                <td style="padding: 10px 6px; vertical-align: top; border-bottom: 1px solid #eee; font-size: 16px !important;">${escapeHtml(formattedCrimeNumber) || '-'}</td>
                            </tr>
                            <tr>
                                <td style="padding: 10px 6px; vertical-align: top; border-bottom: 1px solid #eee; font-weight: bold; font-size: 16px !important; text-align: left;">3. பிரிவு</td>
                                <td style="padding: 10px 2px; vertical-align: top; border-bottom: 1px solid #eee; text-align: center; font-weight: bold; font-size: 16px !important;">:</td>
                                <td style="padding: 10px 6px; vertical-align: top; border-bottom: 1px solid #eee; font-size: 16px !important;">${escapeHtml(data.section) || '-'}</td>
                            </tr>
                            <tr>
                                <td style="padding: 10px 6px; vertical-align: top; border-bottom: 1px solid #eee; font-weight: bold; font-size: 16px !important; text-align: left;">4. பெயர்</td>
                                <td style="padding: 10px 2px; vertical-align: top; border-bottom: 1px solid #eee; text-align: center; font-weight: bold; font-size: 16px !important;">:</td>
                                <td style="padding: 10px 6px; vertical-align: top; border-bottom: 1px solid #eee; font-size: 16px !important;">${escapeHtml(data.name) || '-'}</td>
                            </tr>
                            <tr>
                                <td style="padding: 10px 6px; vertical-align: top; border-bottom: 1px solid #eee; font-weight: bold; font-size: 16px !important; text-align: left;">5. தகப்பனார் பெயர்</td>
                                <td style="padding: 10px 2px; vertical-align: top; border-bottom: 1px solid #eee; text-align: center; font-weight: bold; font-size: 16px !important;">:</td>
                                <td style="padding: 10px 6px; vertical-align: top; border-bottom: 1px solid #eee; font-size: 16px !important;">${escapeHtml(data.fatherName) || '-'}</td>
                            </tr>
                            <tr>
                                <td style="padding: 10px 6px; vertical-align: top; border-bottom: 1px solid #eee; font-weight: bold; font-size: 16px !important; text-align: left;">6. பாலினம்</td>
                                <td style="padding: 10px 2px; vertical-align: top; border-bottom: 1px solid #eee; text-align: center; font-weight: bold; font-size: 16px !important;">:</td>
                                <td style="padding: 10px 6px; vertical-align: top; border-bottom: 1px solid #eee; font-size: 16px !important;">${escapeHtml(data.polym) || '-'}</td>
                            </tr>
                            <tr>
                                <td style="padding: 10px 6px; vertical-align: top; border-bottom: 1px solid #eee; font-weight: bold; font-size: 16px !important; text-align: left;">7. எந்த நாட்டை சேர்ந்தவர்</td>
                                <td style="padding: 10px 2px; vertical-align: top; border-bottom: 1px solid #eee; text-align: center; font-weight: bold; font-size: 16px !important;">:</td>
                                <td style="padding: 10px 6px; vertical-align: top; border-bottom: 1px solid #eee; font-size: 16px !important;">${escapeHtml(data.nationality) || '-'}</td>
                            </tr>
                            <tr>
                                <td style="padding: 10px 6px; vertical-align: top; border-bottom: 1px solid #eee; font-weight: bold; font-size: 16px !important; text-align: left;">8. மதம்</td>
                                <td style="padding: 10px 2px; vertical-align: top; border-bottom: 1px solid #eee; text-align: center; font-weight: bold; font-size: 16px !important;">:</td>
                                <td style="padding: 10px 6px; vertical-align: top; border-bottom: 1px solid #eee; font-size: 16px !important;">${escapeHtml(data.religion) || '-'}</td>
                            </tr>
                            <tr>
                                <td style="padding: 10px 6px; vertical-align: top; border-bottom: 1px solid #eee; font-weight: bold; font-size: 16px !important; text-align: left;">9. வயது</td>
                                <td style="padding: 10px 2px; vertical-align: top; border-bottom: 1px solid #eee; text-align: center; font-weight: bold; font-size: 16px !important;">:</td>
                                <td style="padding: 10px 6px; vertical-align: top; border-bottom: 1px solid #eee; font-size: 16px !important;">${escapeHtml(data.age) || '-'}</td>
                            </tr>
                            <tr>
                                <td style="padding: 10px 6px; vertical-align: top; border-bottom: 1px solid #eee; font-weight: bold; font-size: 16px !important; text-align: left;">10. மரணம் அடைந்த நாள்</td>
                                <td style="padding: 10px 2px; vertical-align: top; border-bottom: 1px solid #eee; text-align: center; font-weight: bold; font-size: 16px !important;">:</td>
                                <td style="padding: 10px 6px; vertical-align: top; border-bottom: 1px solid #eee; font-size: 16px !important;">${escapeHtml(formattedDate) || '-'}</td>
                            </tr>
                            <tr>
                                <td style="padding: 10px 6px; vertical-align: top; border-bottom: 1px solid #eee; font-weight: bold; font-size: 16px !important; text-align: left;">11. மரணத்திற்கான காரணம்</td>
                                <td style="padding: 10px 2px; vertical-align: top; border-bottom: 1px solid #eee; text-align: center; font-weight: bold; font-size: 16px !important;">:</td>
                                <td style="padding: 10px 6px; vertical-align: top; border-bottom: 1px solid #eee; font-size: 16px !important;">${escapeHtml(data.deathCause) || '-'}</td>
                            </tr>
                            <tr>
                                <td style="padding: 10px 6px; vertical-align: top; border-bottom: 1px solid #eee; font-weight: bold; font-size: 16px !important; text-align: left;">12. விலாசம்</td>
                                <td style="padding: 10px 2px; vertical-align: top; border-bottom: 1px solid #eee; text-align: center; font-weight: bold; font-size: 16px !important;">:</td>
                                <td style="padding: 10px 6px; vertical-align: top; border-bottom: 1px solid #eee; font-size: 16px !important;">${escapeHtml(data.address) || '-'}</td>
                            </tr>
                            <tr>
                                <td style="padding: 10px 6px; vertical-align: top; border-bottom: 1px solid #eee; font-weight: bold; font-size: 16px !important; text-align: left;">13. மரணம் ஏற்பட்ட இடம்</td>
                                <td style="padding: 10px 2px; vertical-align: top; border-bottom: 1px solid #eee; text-align: center; font-weight: bold; font-size: 16px !important;">:</td>
                                <td style="padding: 10px 6px; vertical-align: top; border-bottom: 1px solid #eee; font-size: 16px !important;">${escapeHtml(data.deathPlace) || '-'}</td>
                            </tr>
                            <tr>
                                <td style="padding: 10px 6px; vertical-align: top; border-bottom: 1px solid #eee; font-weight: bold; font-size: 16px !important; text-align: left;">14. திருமணம் ஆனவரா/ விதவையா</td>
                                <td style="padding: 10px 2px; vertical-align: top; border-bottom: 1px solid #eee; text-align: center; font-weight: bold; font-size: 16px !important;">:</td>
                                <td style="padding: 10px 6px; vertical-align: top; border-bottom: 1px solid #eee; font-size: 16px !important;">${escapeHtml(data.maritalStatus) || '-'}</td>
                            </tr>
                            <tr>
                                <td style="padding: 10px 6px; vertical-align: top; border-bottom: 1px solid #eee; font-weight: bold; font-size: 16px !important; text-align: left;">15. தொழில்</td>
                                <td style="padding: 10px 2px; vertical-align: top; border-bottom: 1px solid #eee; text-align: center; font-weight: bold; font-size: 16px !important;">:</td>
                                <td style="padding: 10px 6px; vertical-align: top; border-bottom: 1px solid #eee; font-size: 16px !important;">${escapeHtml(data.occupation) || '-'}</td>
                            </tr>
                            <tr>
                                <td style="padding: 10px 6px; vertical-align: top; border-bottom: 1px solid #eee; font-weight: bold; font-size: 16px !important; text-align: left;">16. பிரதேம் புதைக்கப்படுமா/ எரிக்கப்படுமா</td>
                                <td style="padding: 10px 2px; vertical-align: top; border-bottom: 1px solid #eee; text-align: center; font-weight: bold; font-size: 16px !important;">:</td>
                                <td style="padding: 10px 6px; vertical-align: top; border-bottom: 1px solid #eee; font-size: 16px !important;">${escapeHtml(data.bodyDisposal) || '-'}</td>
                            </tr>
                            <tr>
                                <td style="padding: 10px 6px; vertical-align: top; border-bottom: 1px solid #eee; font-weight: bold; font-size: 16px !important; text-align: left;">17. சுடுகாட்டின் பெயர்</td>
                                <td style="padding: 10px 2px; vertical-align: top; border-bottom: 1px solid #eee; text-align: center; font-weight: bold; font-size: 16px !important;">:</td>
                                <td style="padding: 10px 6px; vertical-align: top; border-bottom: 1px solid #eee; font-size: 16px !important;">${escapeHtml(data.informantName) || '-'}</td>
                            </tr>
                        </table>
                    </div>
                `;
                
                // Add HTML to hidden container
                pdfTemplateContainer.innerHTML = pdfHTML;
                
                // Get the PDF template element
                const pdfElement = pdfTemplateContainer.querySelector('.pdf-template');
                
                // Use html2canvas to capture the HTML as an image
                const canvas = await html2canvas(pdfElement, {
                    scale: 2,
                    useCORS: true,
                    allowTaint: true,
                    backgroundColor: '#ffffff',
                    logging: false,
                    onclone: function(clonedDoc) {
                        const template = clonedDoc.querySelector('.pdf-template');
                        if (template) {
                            template.style.fontSize = '16px';
                            template.style.lineHeight = '1.5';
                        }
                    }
                });
                
                // Convert canvas to image data
                const imgData = canvas.toDataURL('image/png');
                
                // Create PDF document
                const pdf = new jsPDF({
                    orientation: 'portrait',
                    unit: 'mm',
                    format: 'a4'
                });
                
                // Calculate dimensions
                const pageWidth = pdf.internal.pageSize.getWidth();
                const pageHeight = pdf.internal.pageSize.getHeight();
                
                const imgWidth = pageWidth - 20;
                const imgHeight = (canvas.height * imgWidth) / canvas.width;
                
                // Add image to PDF
                pdf.addImage(imgData, 'PNG', 10, 10, imgWidth, imgHeight);
                
                // Save PDF with Tamil filename
                const fileName = `மரண_அறிக்கை_${data.name.replace(/\s+/g, '_')}_${Date.now()}.pdf`;
                pdf.save(fileName);
                
                // Clean up
                pdfTemplateContainer.innerHTML = '';
                
                document.getElementById('pdfLoading').style.display = 'none';
                successMessage.style.display = 'block';
                
                console.log('PDF generated successfully!');
                
            } catch (error) {
                console.error('PDF generation error:', error);
                document.getElementById('pdfLoading').style.display = 'none';
                
                // Try simple fallback
                try {
                    generateSimplePDF(data, formattedCrimeNumber);
                } catch (fallbackError) {
                    console.error('Fallback also failed:', fallbackError);
                    alert('PDF உருவாக்கத்தில் பிழை. தயவு செய்து மீண்டும் முயற்சிக்கவும்.');
                }
            }
        }
        
        function generateSimplePDF(data, formattedCrimeNumber) {
            const doc = new jsPDF();
            
            doc.setFontSize(16);
            doc.text('மரண அறிக்கை', 105, 15, { align: 'center' });
            
            let yPos = 35;
            
            doc.text(`1. காவல் நிலையம்: ${data.policeStation}`, 20, yPos);
            yPos += 10;
            doc.text(`2. குற்ற எண்: ${formattedCrimeNumber}`, 20, yPos);
            yPos += 10;
            doc.text(`3. பிரிவு: ${data.section}`, 20, yPos);
            
            const fileName = `death_report_${data.name.replace(/\s+/g, '_')}_${Date.now()}.pdf`;
            doc.save(fileName);
            
            alert('Simple PDF generated.');
        }
        
        function resetForm() {
            document.getElementById('pdfLoading').style.display = 'none';
            successMessage.style.display = 'none';
            stationList.style.display = 'none';
            stationSearch.style.display = 'none';
            sectionInput.value = "194 BNSS";
            populateYearDropdown(); // Reset year to current year
            previewContent.innerHTML = `
                <div class="no-preview">
                    <p>படிவத்தை நிரப்பி "முன்னோட்டம் காட்டு" பொத்தானை அழுத்தவும்</p>
                    <p>படிவத்தில் உள்ள தகவல்கள் இங்கே PDF வடிவத்தில் காட்டப்படும்</p>
                </div>
            `;
        }
        
        // Set default date to today
        document.getElementById('deathDate').value = new Date().toISOString().split('T')[0];
        
        // Fill sample data for testing
        function fillSampleData() {
            policeStationInput.value = 'B1 வடக்குக் கடற்கரை காவல் நிலையம்';
            crimeNumberInput.value = '4567';
            sectionInput.value = '194 BNSS';
            document.getElementById('name').value = 'ராஜேஷ் குமார்';
            document.getElementById('fatherName').value = 'மோகன் சிங்';
            document.getElementById('polym').value = 'ஆண்';
            document.getElementById('nationality').value = 'இந்தியா';
            document.getElementById('religion').value = 'இந்து';
            document.getElementById('age').value = '45';
            document.getElementById('deathCause').value = 'இதய நோய்';
            document.getElementById('address').value = '12, காந்தி தெரு, தேனாம்பேட்டை, சென்னை - 600018';
            document.getElementById('deathPlace').value = 'அப்போல்லோ மருத்துவமனை, சென்னை';
            document.getElementById('maritalStatus').value = 'ஆம்';
            document.getElementById('occupation').value = 'வணிகர்';
            document.getElementById('bodyDisposal').value = 'எரிக்கப்படும்';
            document.getElementById('informantName').value = 'மோகன் சிங் (தகப்பனார்)';
            
            // Auto-show preview after filling sample data
            setTimeout(showPreview, 100);
        }
        
        // Auto-fill sample data for testing
        fillSampleData();
    </script>
</body>
</html>
